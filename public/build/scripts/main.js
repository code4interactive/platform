function code4Loading(t){"start"==t?$("#code4-loading").css("right","0px"):$("#code4-loading").css("right","-135px")}!function(t){t.fn.gritter=t.gritter={},t.fn.gritter.options=t.gritter.options={position:"",addPosition:"bottom",class_name:"",fade_in_speed:"medium",fade_out_speed:1e3,time:6e3},t.fn.gritter.add=t.gritter.add=function(t){try{return e.add(t||{})}catch(o){var n="Gritter Error: "+o;"undefined"!=typeof console&&console.error?console.error(n,t):alert(n)}},t.fn.gritter.remove=t.gritter.remove=function(t,o){e.removeSpecific(t,o||{})},t.fn.gritter.removeAll=t.gritter.removeAll=function(t){e.stop(t||{})};var e={position:"",addPosition:"",fade_in_speed:"",fade_out_speed:"",time:"",_custom_timer:0,_item_count:0,_is_setup:0,_tpl_close:'<div class="gritter-close"></div>',_tpl_title:'<span class="gritter-title">[[title]]</span>',_tpl_item:'<div id="gritter-item-[[number]]" class="gritter-item-wrapper [[item_class]]" style="display:none"><div class="gritter-top"></div><div class="gritter-item">[[close]][[image]]<div class="[[class_name]]">[[title]]<p>[[text]]</p></div><div style="clear:both"></div></div><div class="gritter-bottom"></div></div>',_tpl_wrap:'<div id="gritter-notice-wrapper"></div>',add:function(o){if("string"==typeof o&&(o={text:o}),null===o.text)throw'You must supply "text" parameter.';this._is_setup||this._runSetup();var n=o.title,i=o.text,r=o.image||"",a=o.sticky||!1,s=o.hover_state||!0,c=o.class_name||t.gritter.options.class_name,d=t.gritter.options.position,l=o.close_icon||this._tpl_close,u=o.time||"";this._verifyWrapper(),this._item_count++;var p=this._item_count,f=this._tpl_item;t(["before_open","after_open","before_close","after_close"]).each(function(n,i){e["_"+i+"_"+p]=t.isFunction(o[i])?o[i]:function(){}}),this._custom_timer=0,u&&(this._custom_timer=u);var h=""!==r?'<img src="'+r+'" class="gritter-image" />':"",m=""!==r?"gritter-with-image":"gritter-without-image";if(n=n?this._str_replace("[[title]]",n,this._tpl_title):"",f=this._str_replace(["[[title]]","[[text]]","[[close]]","[[image]]","[[number]]","[[class_name]]","[[item_class]]"],[n,i,l,h,this._item_count,m,c],f),this["_before_open_"+p]()===!1)return!1;"top"===this.addPosition?t("#gritter-notice-wrapper").addClass(d).prepend(f):t("#gritter-notice-wrapper").addClass(d).append(f);var v=t("#gritter-item-"+this._item_count);return v.fadeIn(this.fade_in_speed,function(){e["_after_open_"+p](t(this))}),a||this._setFadeTimer(v,p),t(v).bind("mouseenter mouseleave",function(o){"mouseenter"===o.type?a||e._restoreItemIfFading(t(this),p):a||e._setFadeTimer(t(this),p),"no"!==s&&e._hoverState(t(this),o.type)}),t(v).find(".gritter-close").click(function(){e.removeSpecific(p,{},null,!0)}),p},_countRemoveWrapper:function(e,o,n){o.remove(),this["_after_close_"+e](o,n),0===t(".gritter-item-wrapper").length&&t("#gritter-notice-wrapper").remove()},_fade:function(t,o,n,i){var n=n||{},r="undefined"!=typeof n.fade?n.fade:!0,a=n.speed||this.fade_out_speed,s=i;this["_before_close_"+o](t,s),i&&t.unbind("mouseenter mouseleave"),r?t.animate({opacity:0},a,function(){t.animate({height:0},300,function(){e._countRemoveWrapper(o,t,s)})}):this._countRemoveWrapper(o,t)},_hoverState:function(t,e){"mouseenter"==e?(t.addClass("hover"),t.find(".gritter-close").show()):(t.removeClass("hover"),t.find(".gritter-close").hide())},removeSpecific:function(e,o,n,i){if(!n)var n=t("#gritter-item-"+e);this._fade(n,e,o||{},i)},_restoreItemIfFading:function(t,e){clearTimeout(this["_int_id_"+e]),t.stop().css({opacity:"",height:""})},_runSetup:function(){for(opt in t.gritter.options)this[opt]=t.gritter.options[opt];this._is_setup=1},_setFadeTimer:function(t,o){var n=this._custom_timer?this._custom_timer:this.time;this["_int_id_"+o]=setTimeout(function(){e._fade(t,o)},n)},stop:function(e){var o=t.isFunction(e.before_close)?e.before_close:function(){},n=t.isFunction(e.after_close)?e.after_close:function(){},i=t("#gritter-notice-wrapper");o(i),i.fadeOut(function(){t(this).remove(),n()})},_str_replace:function(t,e,o,n){var i=0,r=0,a="",s="",c=0,d=0,l=[].concat(t),u=[].concat(e),p=o,f=u instanceof Array,h=p instanceof Array;for(p=[].concat(p),n&&(this.window[n]=0),i=0,c=p.length;c>i;i++)if(""!==p[i])for(r=0,d=l.length;d>r;r++)a=p[i]+"",s=f?void 0!==u[r]?u[r]:"":u[0],p[i]=a.split(l[r]).join(s),n&&p[i]!==a&&(this.window[n]+=(a.length-p[i].length)/l[r].length);return h?p:p[0]},_verifyWrapper:function(){0==t("#gritter-notice-wrapper").length&&t("body").append(this._tpl_wrap)}}}(jQuery),function(t){"use strict";function e(){var t=document.createElement("mm"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var o in e)if(void 0!==t.style[o])return{end:e[o]};return!1}function o(e){return this.each(function(){var o=t(this),n=o.data("mm"),r=t.extend({},i.DEFAULTS,o.data(),"object"==typeof e&&e);n||o.data("mm",n=new i(this,r)),"string"==typeof e&&n[e]()})}t.fn.emulateTransitionEnd=function(e){var o=!1,i=this;t(this).one("mmTransitionEnd",function(){o=!0});var r=function(){o||t(i).trigger(n.end)};return setTimeout(r,e),this};var n=e();n&&(t.event.special.mmTransitionEnd={bindType:n.end,delegateType:n.end,handle:function(e){return t(e.target).is(this)?e.handleObj.handler.apply(this,arguments):void 0}});var i=function(e,o){this.$element=t(e),this.options=t.extend({},i.DEFAULTS,o),this.transitioning=null,this.init()};i.TRANSITION_DURATION=350,i.DEFAULTS={toggle:!0,doubleTapToGo:!1,activeClass:"active",collapseClass:"collapse",collapseInClass:"in",collapsingClass:"collapsing"},i.prototype.init=function(){var e=this,o=this.options.activeClass,n=this.options.collapseClass,i=this.options.collapseInClass;this.$element.find("li."+o).has("ul").children("ul").attr("aria-expanded",!0).addClass(n+" "+i),this.$element.find("li").not("."+o).has("ul").children("ul").attr("aria-expanded",!1).addClass(n),this.options.doubleTapToGo&&this.$element.find("li."+o).has("ul").children("a").addClass("doubleTapToGo"),this.$element.find("li").has("ul").children("a").on("click.metisMenu",function(n){var i=t(this),r=i.parent("li"),a=r.children("ul");return n.preventDefault(),r.hasClass(o)&&!e.options.doubleTapToGo?(e.hide(a),i.attr("aria-expanded",!1)):(e.show(a),i.attr("aria-expanded",!0)),e.options.doubleTapToGo&&e.doubleTapToGo(i)&&"#"!==i.attr("href")&&""!==i.attr("href")?(n.stopPropagation(),void(document.location=i.attr("href"))):void 0})},i.prototype.doubleTapToGo=function(t){var e=this.$element;return t.hasClass("doubleTapToGo")?(t.removeClass("doubleTapToGo"),!0):t.parent().children("ul").length?(e.find(".doubleTapToGo").removeClass("doubleTapToGo"),t.addClass("doubleTapToGo"),!1):void 0},i.prototype.show=function(e){var o=this.options.activeClass,r=this.options.collapseClass,a=this.options.collapseInClass,s=this.options.collapsingClass,c=t(e),d=c.parent("li");if(!this.transitioning&&!c.hasClass(a)){d.addClass(o),this.options.toggle&&this.hide(d.siblings().children("ul."+a).attr("aria-expanded",!1)),c.removeClass(r).addClass(s).height(0),this.transitioning=1;var l=function(){c.removeClass(s).addClass(r+" "+a).height("").attr("aria-expanded",!0),this.transitioning=0};return n?void c.one("mmTransitionEnd",t.proxy(l,this)).emulateTransitionEnd(i.TRANSITION_DURATION).height(c[0].scrollHeight):l.call(this)}},i.prototype.hide=function(e){var o=this.options.activeClass,r=this.options.collapseClass,a=this.options.collapseInClass,s=this.options.collapsingClass,c=t(e);if(!this.transitioning&&c.hasClass(a)){c.parent("li").removeClass(o),c.height(c.height())[0].offsetHeight,c.addClass(s).removeClass(r).removeClass(a),this.transitioning=1;var d=function(){this.transitioning=0,c.removeClass(s).addClass(r).attr("aria-expanded",!1)};return n?void c.height(0).one("mmTransitionEnd",t.proxy(d,this)).emulateTransitionEnd(i.TRANSITION_DURATION):d.call(this)}};var r=t.fn.metisMenu;t.fn.metisMenu=o,t.fn.metisMenu.Constructor=i,t.fn.metisMenu.noConflict=function(){return t.fn.metisMenu=r,this}}(jQuery),$(document).ready(function(){$(document.body).on("click",".loadInModal",function(t){t.preventDefault();var e=$(this).attr("href");return $.ajax({url:e,method:"get",success:function(t){$id=$(t).find(".modal").attr("id"),$(t).modal("show")},error:function(t){}}),!1}),$(document.body).on("click","[data-modal]",function(t){t.preventDefault();var e;return""!==$(this).attr("data-modal")?e=$(this).attr("data-modal"):""!==$(this).attr("href")&&(e=$(this).attr("href")),""===e?void console.log("No target/url for modal"):"#"===e.substr(0,1)||"."===e.substr(0,1)?void $(e).modal("show"):($.ajax({url:e,method:"get",success:function(t){$(t).modal("show")},error:function(t){}}),!1)}),$(document.body).on("click",".editModal",function(t){t.preventDefault();var e=$(this).attr("href");return $.ajax({url:e,method:"get",success:function(t){$id=$(t).find(".modal").attr("id"),$(t).modal("show")},error:function(t){}}),!1})}),function(t,e,o){"use strict";function n(n){this.opt=t.extend({},i,n),this.$body=t(o.body),this.$window=t(e)}var i={activityFeedUrl:"/getActivityFeed",watchThreadUrl:"/watchThread"};n.prototype={_init:function(){var e=this;t("[data-action=getActivityFeed]").each(function(t,o){e.getActivityFeed(o)}),t(o).on("click","[data-action=watchThread]",function(){var o=t(this).attr("data-thread");e.watchThread(o)})},getActivityFeed:function(e){var o=this,n=t(e).attr("data-activity-feed"),i={feedSubject:n};return t(".processingIndicator").css("display","block"),t.ajax({url:o.opt.activityFeedUrl,async:!0,global:!1,type:"POST",data:i,dataType:"html",success:function(n,i,r){t(".processingIndicator").css("display","none"),o.showFeed(n,e)},error:function(e,n,i){t(".processingIndicator").css("display","none"),o._handleServerError(e,n,i)}}),null},watchThread:function(e){var o=this;t.ajax({url:o.opt.watchThreadUrl+"/"+e,async:!0,global:!1,type:"GET",dataType:"json",success:function(e,o,n){t.platform._handleServerResponse(n)},error:function(t,e,n){o._handleServerError(t,e,n)}})},reloadFeed:function(e){var o=this;t("[data-activity-feed="+e+"]").each(function(t,e){o.getActivityFeed(e)})},_handleServerError:function(e,o,n){t.platform._handleServerError(e,o,n)},showFeed:function(e,o){t(o).html(e)}},t.activity=new n}(jQuery,window,document),function($,window,document){"use strict";function C4Forms(t){this.opt=$.extend({},defaults,t),this.$body=$(document.body),this.$window=$(window)}var defaults={unloadMessage:"Zamierzasz opuścić stronę na której są niezapisane dane. Czy napewno?",monitorForUnsavedChanges:!1,unsaved:!1};C4Forms.prototype={_init:function(){var t=this;t.opt.monitorForUnsavedChanges===!0&&t.alertUnsavedChanges(),$(document.body).on("click",'form.ajax button[type="submit"], form.ajax input[type="submit"]',function(){var e={beforeSubmit:t.showRequest,success:t.showResponse,error:t.showErrors,type:"post",dataType:"json"};$("form.ajax").ajaxForm(e)}),$(document.body).on("click",".confirmDelete",function(t){var e='Czy napewno usunąć "'+$(this).data("name")+'"?';return confirm(e)})},alertUnsavedChanges:function(){var t=this;$(document).on("change","form[method=post]:not([data-remote]) :input",function(){return t.opt.unsaved=!0}),$(document).on("page:change",function(){return setTimeout(function(){return t.opt.unsaved=!1},10)}),$(document).on("submit","form[method=post]",function(){t.opt.unsaved=!1}),$(window).bind("beforeunload",function(){return t.opt.unsaved?t.opt.unloadMessage:void 0}),$(document).on("page:before-change",function(e){return t.opt.unsaved&&!confirm(t.opt.unloadMessage)?e.preventDefault():void 0})},showRequest:function(t,e,o){return $(".error").removeClass("error"),$(".field-error").remove(),$(".messageBox").empty(),$('button[type="submit"], input[type="submit"]').attr("disabled",!0),$(".processingIndicator").css("display","block"),!0},showResponse:function(responseText,statusText,xhr,$form){$(".processingIndicator").css("display","none"),$('button[type="submit"], input[type="submit"]').attr("disabled",!1),"undefined"!=typeof responseText.status&&"success"===responseText.status&&("undefined"!=typeof responseText.redirect&&($(".redirectOverlay").css("display","block"),window.location.replace(responseText.redirect)),"undefined"!=typeof responseText.evalScript&&eval("("+responseText.evalScript+")"))},showFieldErrors:function(t,e){return $(".processingIndicator").css("display","none"),$('button[type="submit"], input[type="submit"]').attr("disabled",!1),"string"==typeof e&&(e=jQuery.parseJSON(e)),"object"!=typeof e?(console.log("form.js: Errors are not in object form"),!1):(jQuery.each(e,function(e,o){var n="";if("messageBox"===e){for(var i=$(document.createElement("div")).addClass("alert alert-danger"),r=0;r<o.length;r++)i.append("<p>"+o[r]+"</p>");t.find(".messageBox").html(i)}else if("popup"===e);else{for(var a=0;a<o.length;a++)n+='<label id="'+e+'-error" class="error field-error" for="'+e+'">'+o[a]+"</label>";t.find("#form-"+e).addClass("error").parent().append(n)}}),!0)},showErrors:function(t,e,o,n){return toastr.error("W przesłanym formularzu są błędy","Błąd formularza"),$.c4forms.showFieldErrors(n,t.responseText)},ajaxSuccess:function(){}},$.c4forms=new C4Forms}(jQuery,window,document),function($,window,document){"use strict";function Platform(t){this.opt=$.extend({},defaults,t),this.$body=$(document.body),this.$window=$(window),this.userId=currentUserId}var defaults={path_assets:"/packages/code4/platform/",menuMinified:!1};Platform.prototype={_init:function(){var t=this;$("[rel=tooltip],[data-rel=tooltip]").tooltip({html:!0}),$("[rel=popover],[data-rel=popover]").popover({html:!0}),$("#testReload").on("click",function(){$.ajax({url:"/testReload",async:!1,global:!1,type:"GET",dataType:"json",success:function(e,o,n){t._handleServerResponse(n)},error:function(e,o,n){t._handleServerError(e,o,n)}})}),this._timers()},_timers:function(){},store:function(t,e){},login:function(){},lockout:function(){var t=this;$.ajax({url:"/lockout/"+t.userId,async:!1,global:!1,type:"GET",dataType:"html",success:function(e,o,n){t.$body.find(".fullScreenModal").remove(),t.$body.addClass("modal-open"),t.$body.append('<div class="fullScreenModal gray-bg animated slideInDown">'+e+"</div>")},error:function(e,o,n){t._handleServerError(e,o,n)}})},lockoutExit:function(){var t=this;t.$body.removeClass("modal-open"),$(".fullScreenModal").removeClass("slideInDown").addClass("slideOutUp").delay(100).remove()},_handleServerResponse:function(jqXHR){var self=this;if(200==jqXHR.status){var responseText=JSON.parse(jqXHR.responseText);"actions"in responseText&&$.each(responseText.actions,function(i,actions){for(var action in actions){var command=actions[action];"exitLockout"===action&&self.lockoutExit(),"redirect"===action&&window.location.replace(command),"reloadFeed"===action&&$.activity.reloadFeed(command),"reload"===action&&window.location.reload(command),"eval"===action&&eval(command),"checkNotifications"===action&&$.notifications.check(),"notifications"===action&&$.notifications.handleNotifications(command),"reloadDataTable"===action&&$(command).DataTable().ajax.reload(null,!1)}})}},_handleServerError:function(t,e,o){console.log(t);401==t.status?$.platform.lockout():302==t.status?(console.log("redirect "+t.responseText),window.location.replace(t.responseText)):403==t.status?$.notifications.showError("Brak uprawnień","Nie masz uprawnień do tego zasobu!"):500==t.status&&$.notifications.showError("Błąd serwera","Jeśli będzie się powtarzał, skontaktuj się z administratorem!")}},$.platform=new Platform}(jQuery,window,document),$(document).ready(function(){$.platform._init(),$.notifications._init(),$.notifications.check(),$.activity._init(),$.c4forms._init(),$(document).ajaxSuccess(function(t,e,o){}),$(document).ajaxComplete(function(t,e,o){})});var slug=function(t){t=t.replace(/^\s+|\s+$/g,""),t=t.toLowerCase();for(var e="ąãàáäâęẽèéëêìíïîõòóöôùúüûñńçćśłżź·/_,:;",o="aaaaaaeeeeeeiiiiooooouuuunnccslzz------",n=0,i=e.length;i>n;n++)t=t.replace(new RegExp(e.charAt(n),"g"),o.charAt(n));return t=t.replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-")};$(document).ready(function(){$("#top-search").on("focusin",function(){$(this).val().length>2&&$(".search-dropdown").show()}),$("body").not(".search-dropdown, #top-search").on("click",function(t){$(".search-dropdown").hide()})});
//# sourceMappingURL=main.js.map
